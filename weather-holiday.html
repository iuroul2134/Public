<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>天气 + 节日倒计时</title>

<style>
body {
  margin: 0;
  background: transparent;
  font-family: "微软雅黑", "PingFang SC", sans-serif;
}

.card {
  width: 360px;
  height: 360px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
}

/* 黑字 + 白描边 */
.stroke {
  color: #000;
  text-shadow:
    -1px -1px 0 #fff,
     1px -1px 0 #fff,
    -1px  1px 0 #fff,
     1px  1px 0 #fff;
}

.city {
  font-size: 18px;
  margin-bottom: 6px;
}

.temp {
  font-size: 48px;
  font-weight: 600;
}

.divider {
  width: 80%;
  height: 1px;
  background: rgba(0,0,0,0.3);
  margin: 12px 0;
}

.holiday {
  font-size: 16px;
}

.days {
  font-size: 32px;
  font-weight: 600;
}
</style>
</head>

<body>
<div class="card">
  <div id="city" class="city stroke">加载中…</div>
  <div id="temp" class="temp stroke">--℃</div>

  <div class="divider"></div>

  <div class="holiday stroke">距离 春节</div>
  <div id="days" class="days stroke">-- 天</div>
</div>

<script>
// 全国省会（轮播）
const cities = [
  { name: "北京", lat: 39.9042, lon: 116.4074 },
  { name: "上海", lat: 31.2304, lon: 121.4737 },
  { name: "广州", lat: 23.1291, lon: 113.2644 },
  { name: "深圳", lat: 22.5431, lon: 114.0579 },
  { name: "成都", lat: 30.5728, lon: 104.0668 },
  { name: "杭州", lat: 30.2741, lon: 120.1551 },
  { name: "武汉", lat: 30.5928, lon: 114.3055 },
  { name: "西安", lat: 34.3416, lon: 108.9398 }
];

let index = 0;

function loadWeather() {
  const city = cities[index];
  document.getElementById("city").innerText = city.name;

  fetch(`https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current_weather=true`)
    .then(res => res.json())
    .then(data => {
      document.getElementById("temp").innerText =
        Math.round(data.current_weather.temperature) + "℃";
    })
    .catch(() => {
      document.getElementById("temp").innerText = "--℃";
    });

  index = (index + 1) % cities.length;
}

// 春节倒计时（2026-02-17）
const springFestival = new Date("2026-02-17");

function updateDays() {
  const now = new Date();
  const diff = springFestival - now;
  const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
  document.getElementById("days").innerText = days + " 天";
}

loadWeather();
updateDays();
setInterval(loadWeather, 10000);
</script>
</body>
</html>
